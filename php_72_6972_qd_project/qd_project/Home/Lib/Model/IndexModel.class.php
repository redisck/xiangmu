<?php	class IndexModel extends Model{		function get_father_classify(){			$classify=M("Classify");			$classify_father=$classify->where(array('pid'=>0,'status'=>0))->select();			//获取主菜单小图标			$classify_image=get_classify_image();			//获取主菜单链接路径			$classify_path=get_classify_path();			foreach($classify_father as $key=>$value){				$classify_father[$key]['image']=$classify_image[$key];				$classify_father[$key]['path']=$classify_path[$key];							}			return $classify_father;		}		function get_time_sail_info(){			$sail=new Model();			$sql="select t.id,t.classify_id,t.goods_id,t.price,t.rebate_price,t.start_time,t.end_time,t.status,				g.reserve,g.name,g.image,g.author,g.qd_id,g.press from qd_goods as g,qd_time_sail as t where g.id=t.goods_id order by t.status desc limit 1";			$info=$sail->query($sql);			return $info;		}		function get_hot_search_book(){			$classify=M("Classify");			$classify_id=$classify->field('id')->where(array('pid'=>1,'status'=>0))->select();			foreach($classify_id as $key=>$value){				$array[]=$value['id'];			}			$pid=implode(",",$array);			$goods=M("Goods");			$goods_book=$goods->where("classify_id in ($pid)")->order('reserve')->limit(5)->select();			foreach($goods_book as $key=>$value){				$arr=explode("_",$goods_book[$key]['image']);				$goods_book[$key]['truncate']=truncate($goods_book[$key]['name']);				$goods_book[$key]['order']=$key+1;				$goods_book[$key]['image_first']=$arr[0];				$goods_book[$key]['image_last']=$arr[1];			}			return $goods_book;		}				 function get_hot_search_plaything(){			$classify=M("Classify");			$classify_id=$classify->field('id')->where(array('pid'=>2,'status'=>0))->select();			foreach($classify_id as $key=>$value){				$arr[]=$value['id'];			}			$data['classify_id']=array("in",$arr);			$goods=M("Goods");			$goods_plaything=$goods->where($data)->order('reserve')->limit(5)->select();			foreach($goods_plaything as $key=>$value){			$arr=explode("_",$goods_plaything[$key]['image']);			$goods_plaything[$key]['truncate']=truncate($goods_plaything[$key]['name']);			$goods_plaything[$key]['order']=$key+1;			$goods_plaything[$key]['image_first']=$arr[0];			$goods_plaything[$key]['image_last']=$arr[1];			}			return $goods_plaything;		}		function get_new_book(){			$classify=M("Classify");			$classify_id=$classify->field('id')->where(array('pid'=>1,'status'=>0))->select();			foreach($classify_id as $key=>$value){				$array[]=$value['id'];			}			$goods=M("Goods");			$new_book=$goods->where(array('new_book'=>1,'classify_id'=>array('in',$array)))->limit(10)->select();			foreach($new_book as $key=>$value){				$arr=explode("_",$new_book[$key]['image']);				$new_book[$key]['truncate']=truncate($new_book[$key]['name']);				$new_book[$key]['image_first']=$arr[0];				$new_book[$key]['image_last']=$arr[1];			}			return $new_book;		}		function get_weight_book(){			$classify=M("Classify");			$classify_id=$classify->field('id')->where(array('pid'=>1,'status'=>0))->select();			foreach($classify_id as $key=>$value){				$array[]=$value['id'];			}			$goods=M("Goods");			$weight_book=$goods->where(array('end_book'=>1,'classify_id'=>array('in',$array)))->limit(10)->select();			foreach($weight_book as $key=>$value){				$arr=explode("_",$weight_book[$key]['image']);				$weight_book[$key]['truncate']=truncate($weight_book[$key]['name']);				$weight_book[$key]['image_first']=$arr[0];				$weight_book[$key]['image_last']=$arr[1];			}			return $weight_book;		}		function get_plaything(){			$classify=M("Classify");			$classify_id=$classify->field('id')->where(array('pid'=>2,'status'=>0))->select();			foreach($classify_id as $key=>$value){				$array[]=$value['id'];			}			$goods=M("Goods");			$plaything=$goods->where(array('classify_id'=>array('in',$array)))->limit(15)->select();			foreach($plaything as $key=>$value){				$arr=explode("_",$plaything[$key]['image']);				$plaything[$key]['truncate']=truncate($plaything[$key]['name']);				$plaything[$key]['image_first']=$arr[0];				$plaything[$key]['image_last']=$arr[1];			}			return $plaything;  		}	 	}